{"slots":{"0":{"name":"slot1","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"Screen.clear()","filter":{"args":[],"signature":"stop()","slotKey":"-2"},"key":"0"},{"code":"function getStatusName(status)\n    local fontYellow = \"<font color=yellow>\"\n    local fontRed = \"<font color=red>\"\n    local fontGreen = \"<font color=green>\"\n    if status == \"PENDING\" then return fontYellow..\"En attente</font>\"\n    elseif status == \"STOPPED\" then return fontRed..\"Arrêt</font>\"\n    elseif status == \"RUNNING\" then return fontGreen..\"En Service</font>\"\n    elseif status == \"JAMMED_MISSING_INGREDIENT\" then return fontRed..\"Ingrédient manquant</font>\"\n    elseif status == \"JAMMED_OUTPUT_FULL\" then return fontRed..\"Sortie pleine</font>\"\n    elseif status == \"JAMMED_NO_OUTPUT_CONTAINER\" then return fontRed..\"Pas de conteneur de sortie</font>\"\n    end\nend\n\nlocal style = \"<style>th { font-size: \"..fontSize..\"em; text-align: left; vertical-align: middle; border-bottom: 3px solid #ddd; }</style>\"\nlocal html = style..\"<p style='font-size: \"..fontSize..\"em; text-align: center; margin-top: 15px; margin-bottom: 15px;'>\"..tableName..\"</p><table width=100%>\"\n\nfor i = 1, #machines\ndo\n\thtml = html..\"<tr><th>\"..slotsName[i]..\"</th><th>\"..getStatusName(machines[i].getStatus())..\"</th></tr>\"\nend\n\nhtml = html..\"</table>\"\n \nif Screen then\n\tScreen.setHTML(html)\n    end\n\nif Emitter then\n    Emitter.send(\"test\", \"message\")\n    end","filter":{"args":[],"signature":"update()","slotKey":"-2"},"key":"1"},{"code":"tableName = \"Raffinage\" --export\nM1Name = \"Carbone pur\" --export\nM2Name = \"Aluminium pur\" --export\nM3Name = \"Sodium pur\" --export\nM4Name = \"Dispo\" --export\nM5Name = \"Dispo\" --export\nM6Name = \"Machine 6\" --export\nM7Name = \"Machine 7\" --export\nM8Name = \"Machine 8\" --export\nM9Name = \"Machine 9\" --export\nfontSize = 4.5 --export\n\nScreen = nil\nEmitter = nil\n\nslotsName = { M1Name, M2Name, M3Name, M4Name, M5Name, M6Name, M7Name, M8Name, M9Name }\nslots = { slot1, slot2, slot3, slot4, slot5, slot6, slot7, slot8, slot9, slot10 }\nmachines = {}\n\nfor i = 1,10\ndo\n    if slots[i] then\n        if slots[i].getElementClass() == \"ScreenUnit\" then\n            Screen = slots[i]\n        elseif slots[i].getElementClass() == \"EmitterUnit\" then\n            Emitter = slots[i]\n\t   else\n            machines[#machines+1] = slots[i]\n        end\n    end\nend","filter":{"args":[],"signature":"start()","slotKey":"-2"},"key":"2"}],"methods":[],"events":[]}
